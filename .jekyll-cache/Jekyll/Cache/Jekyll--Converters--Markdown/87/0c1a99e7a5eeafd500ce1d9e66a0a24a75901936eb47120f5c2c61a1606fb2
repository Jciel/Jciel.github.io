I"8<p><br /></p>

<p>O AutoCAD √© um software de CAD, Desenho Auxiliado por Computador, permite a cria√ß√£o de desenhos t√©cnicos em 2D e modelos 
tridimensionais, utilizado em diversas √°reas como engenharias, arquitetura topologia, design etc, √© um dos software mais 
utilizados para este fim. Uma caracter√≠stica do AutoCAD √© que ele permite o uso de programa√ß√£o em AutoLISP para personaliza√ß√£o 
e estens√£o de suas funcionalidades.<br />
<br />
O AutoLISP √© um dialeto da linguagem LISP, uma das mais antigas utilizadas at√© hoje, o AutoLISP foi incorporado no 
AutoCAD em 1996 e tem sido amplamente utilizado para customiza√ß√£o do ambiente do AutoCAD, permitindo criar ‚Äúcomando‚Äù 
e ferramentas espec√≠ficas para problemas de √°reas diversas.</p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*oT0-Tqda8sGMdKH0SHPbOw.jpeg" alt="" /></p>
<div class="img-legend">Nate Grant em Unsplash</div>

<p><br /></p>

<h4 id="autolisp"><strong>AutoLISP</strong></h4>
<p>O AutoLISP, assim como o LISP, √© extremamente simples e mant√©m uma enorme flexibilidade, permitindo a f√°cil extens√£o e 
cria√ß√£o de novos meios para resolu√ß√£o de problemas, ele evoluiu e manteve a maioria dos conceitos b√°sicos, tipos de dados 
e capacidade do LISP, al√©m de acrescentar funcionalidades especiais para opera√ß√µes e recursos do ambiente do AutoCAD.</p>

<p>Quando comparada com outras linguagens mais usuais o AutoLISP pussui uma sintaxe extremamente simples, baseada em 
<em>S-Expressions</em>, de maneira simploria √© uma forma de representar dados em listas encadeadas.<br />
Podemos escrever uma express√£o em AutoLISP utilizando elementos primitivos como caracteres, n√∫meros, ou compondo outras 
espress√µes entre si.</p>

<p><br /></p>

<p>Sendo baseada em processamento de listas o AutoLISP se encaiza muito bem em um sistema CAD j√° que a maioria deste tipo 
de sistema gr√°fico se baseiam em pontos e vetores em um plano cartesiano. Tomando como exemplo um sistema CAD com 
coordenadas em um plano cartesiano, um ponto nesse plano pode ser considerado uma lista de n√∫meros, cada n√∫mero 
representando uma posi√ß√£o nos eixos <strong>X</strong> <strong>Y</strong> e <strong>Z</strong>.</p>

<p><code class="language-plaintext highlighter-rouge">ponto1 = (2 5 3)</code> - coordenada X = 2, coordenada Y = 5, coordenada Z = 3</p>

<p>Agora imaginem uma linha desenhada nesse plano cartesiano definida por dois pontos, podemos perceber essa linha como 
uma lista contendo duas listas internas descrevendo o ponto inicial e o ponto final da linha.</p>

<p><code class="language-plaintext highlighter-rouge">linha = ((0 0) (3 4))</code></p>

<div class="img-container">
    <img src="https://i.ibb.co/PMq3y1m/linha.png" />  
</div>

<p><br />
<br /></p>

<h4 id="sintaxe"><strong>Sintaxe</strong></h4>

<p>A sitaxe do AutoLISP, como citado, √© simples, uma express√£o √© escrita iniciando-se com um <code class="language-plaintext highlighter-rouge">(</code> logo ap√≥s temos uma<br />
fun√ß√£o, tudo o que vier em seguida s√£o par√¢metros para esta fun√ß√£o e terminamos com um <code class="language-plaintext highlighter-rouge">)</code>.</p>

<p><code class="language-plaintext highlighter-rouge">
(fun√ß√£o par√¢metro [...par√¢metros])
</code></p>

<p>Toda express√£o √© enviada para o interpretador do AutoLISP para ser avaliada e saber qual a natureza da express√£o, se o<br />
primeiro elemento da lista for um nome de uma <code class="language-plaintext highlighter-rouge">subr</code> ou uma fun√ß√£o, esta ser√° executada e o restante da lista √© usada<br />
como par√¢metros, se o primeiro elemento n√£o for uma fun√ß√£o ou <code class="language-plaintext highlighter-rouge">subr</code>`√© apresentado uma mensagem de erro.</p>

<p>Uma das vantagens √© que podemos executar uma express√£o diretamente no prompt de comando do AutoCAD, isso nor permite<br />
testar trechos de c√≥digos e v√™-los funcionando ou falhando antes de escrev√™-los em um c√≥digo principal.</p>

<div class="img-container">
    <img src="https://i.ibb.co/DRSpxG4/command.png" />  
</div>

<p>O AutoLISP manteve a nota√ß√£o prefixada, ou seja, o operador vem primeiro e em seguida os operandos, aplicando isso em 
uma opera√ß√£o matem√°tica temos:</p>

<script src="https://gist.github.com/Jciel/fd8cfbbd402c04d547a84b39965995db.js"></script>

<p>Transfoemando isso para a nota√ß√£o infixa a qual esmos acostumados seria algo como o seguinte</p>

<p><code class="language-plaintext highlighter-rouge">(2 * 2)</code> e <code class="language-plaintext highlighter-rouge">((45 * PI) / 180)</code></p>

<p><br /></p>

<p>Existem alguns caracteres especiais em AutoLISP:</p>

<p><code class="language-plaintext highlighter-rouge">(</code> e <code class="language-plaintext highlighter-rouge">)</code> - Define o inicio e fim de uma express√£o;<br />
<code class="language-plaintext highlighter-rouge">"</code> - Define um nome de comando do AutoCAD ou um texto qualquer;<br />
<code class="language-plaintext highlighter-rouge">;</code> - Define uma linha de coment√°rio;<br />
Letras mai√∫sculas e min√∫sculas n√£o tem diferen√ßa em AutoLISP.</p>

<p>Algumas caracter√≠sticas da linguagem:</p>

<p><code class="language-plaintext highlighter-rouge">√Åtomo</code> √© o elemento de dado b√°sico do AUtoLISP, tipos de dados complexos s√£o constru√≠dos usando conjunto de √Åtomos;<br />
<code class="language-plaintext highlighter-rouge">Symbols</code> refere-se a qualquer ‚Äònome‚Äô em um c√≥digo AutoLSIP, seja j√° existente no interpretador ou definido pelo usu√°rio;<br />
<code class="language-plaintext highlighter-rouge">Vari√°vel</code> √© um s√≠mbolo utilizado para guardar alguma informa√ß√£o relevante em um c√≥digo AutoLISP;</p>

<p><br /></p>

<h4 id="tipos-de-dados"><strong>Tipos de dados</strong></h4>
<p>Vari√°veis podem guardar diversos tipos de dados, seguem alguns tipos b√°sicos.</p>

<p><strong><code class="language-plaintext highlighter-rouge">inteiro</code></strong> s√£o n√∫meros sem casas decimais;<br />
<strong><code class="language-plaintext highlighter-rouge">real</code></strong> s√£o n√∫meros que possuem uma parte decimal;<br />
<strong><code class="language-plaintext highlighter-rouge">Nothing (nil)</code></strong> o mesmo que nulo;<br />
<strong><code class="language-plaintext highlighter-rouge">sub-rotina (subr)</code></strong> s√£o fun√ß√µes j√° definidas no interpretador do AutoLISP e dispon√≠veis para serem utilizadas;<br />
<strong><code class="language-plaintext highlighter-rouge">ponteiro de arquivo (file)</code></strong> √© um ponteiro para um arquivo, utilizado para manipula√ß√£o de arquivos de texto (txt);<br />
<strong><code class="language-plaintext highlighter-rouge">Entity name (ename)</code></strong> √© um ponteiro para o banco de dados do desenho, utilizado para acesso as propriedades de uma 
entidade no desenho;<br />
<strong><code class="language-plaintext highlighter-rouge">lista</code></strong> √© um conjunto de dados, uma lista pode conter tipos diferente de dados inclusive outras listas, existem dois 
tipos de listas, lista simples e lista de associa√ß√£o;<br />
<strong><code class="language-plaintext highlighter-rouge">fun√ß√µes</code></strong> s√£o trechos de c√≥digos definido pelo usu√°rio;</p>

<p><br /></p>

<h4 id="ambiente-do-visuallisp"><strong>Ambiente do VisualLISP</strong></h4>

<p>O AutoCAD possui um editor chamado VisualLISP, nele √© poss«òiel escrever c√≥digo AutoLISP com destaque de sintaxe entre 
outras coisas, podemos abri-lo usando o comando <strong><code class="language-plaintext highlighter-rouge">vlisp</code></strong>.</p>

<div class="img-container">
    <img src="https://i.ibb.co/HrQ1PyF/vlisp-Initial.png" />  
</div>

<p>Na parte superior temos o editor e na inferior temos um console onde podemos executar trechos de c√≥digo e ver os 
resultados desses testes.<br />
Temos tamb√©m algumas ferramentas na parte superior, nas barras de ferramentas, por exemplo o <code class="language-plaintext highlighter-rouge">Load active edit window</code></p>

<div class="img-container">
    <img src="https://i.ibb.co/Q6cwL0W/load-Active-Edit-Window.png" />  
</div>

<p>que faz o ‚Äúload‚Äù para o AutoCAD de todo o c√≥digo escrito na janela atual deixando dispon√≠vel para executar no AutoCAD 
aberto no momento, e tamb√©m temos o <code class="language-plaintext highlighter-rouge">Load selection</code></p>

<div class="img-container">
    <img src="https://i.ibb.co/VJy91VB/load-Selection.png" />  
</div>

<p>que faz ‚Äúload‚Äù apenas do trecho selecionado do c√≥digo atual.</p>

<p><br /></p>

<h4 id="vari√°veis"><strong>Vari√°veis</strong></h4>

<p>Vari√°vei s√£o simbolos onde podemos ‚Äúguardar‚Äù alguma informa√ß√£o a ser utilizada, uma vari√°vel √© definida com a subr <code class="language-plaintext highlighter-rouge">setq</code>.</p>

<script src="https://gist.github.com/Jciel/7d623aec0af67d49e5d70d0f38724495.js"></script>

<p><br /></p>

<h4 id="fun√ß√µes"><strong>Fun√ß√µes</strong></h4>

<p>Uma fun√ß√£o √© um trecho de c√≥digo bem definido que resolve um problema espec√≠fico, podemos dividir um problema grande em 
fun√ß√µes menores que resolvem uma parte desse problema para no final conseguir a solu√ß√£o completa. Toda fun√ß√£o ou subr 
retorna um valor, esse retorno √© o resultado da avalia√ß√£o da √∫ltima express√£o da fun√ß√£o.<br />
Para criarmos uma fun√ß√£o em AutoLISP usamos a subr <code class="language-plaintext highlighter-rouge">defun</code>, a cria√ß√£o de uma fun√ß√£o segue o seguinte exemplo:</p>

<script src="https://gist.github.com/Jciel/64c0ea1673d5f89ed0fd778c6ae9071a.js"></script>

<p><br /></p>

<p><strong>Exemplos:</strong></p>

<script src="https://gist.github.com/Jciel/8274f7f015b20aac175a1a6dd3615bf5.js"></script>

<p><br /></p>

<p>Vari√°veis em fun√ß√µes podem assumir tr√™s estados diferentes de determinado por sua exist√™ncia e localiza√ß√£o na lista de 
par√¢metros da fun√ß√£o:</p>

<p><strong><code class="language-plaintext highlighter-rouge">Vari√°vel associada</code></strong>, <strong><code class="language-plaintext highlighter-rouge">Vari√°vel global</code></strong> e <strong><code class="language-plaintext highlighter-rouge">Vari√°vel local</code></strong></p>

<p>A √°rea onde definimos os par√¢metros de um fun√ß√£o pode ser dividida em duas partes</p>

<p><code class="language-plaintext highlighter-rouge">(defun teste(&lt;par√¢metros&gt; / &lt;vari√°veis locais&gt;) ...</code></p>

<p>Vari√°veis associadas s√£o os par√¢metros da fun√ß√£o e ficam do lado esquerdo da <code class="language-plaintext highlighter-rouge">/</code>, vari√°veis locais ficam do lado direito 
da <code class="language-plaintext highlighter-rouge">/</code>, o resto s√£o vari√°veis globais. Sempre defina vari√°veis locais para evitar sobrescrita de outros nomes de 
vari√°veis, fun√ß√µes ou que outra fun√ß√£o manipule uma vari√°vel alterando completamente o resultado final.<br />
Uma vari√°vel local s√≥ existe dentro do copro da fun√ß√£o, seu valor n√£o √© visto fora dela.</p>

<script src="https://gist.github.com/Jciel/01c9ade5b12a1006f8962e1101ef8d44.js"></script>

<p><br /></p>

<p>Para executar uma fun√ß√£o criada no AutoLISP ap√≥s fazer ‚Äúload‚Äù do c√≥digo, podemos chamar ela no prompt de comando coloando 
o nome da fun√ß√£o entre parenteses.</p>

<div class="img-container">
    <img src="https://i.ibb.co/h2RGjrV/execu-o-Fun-o.png" />  
</div>

<p>Para chamarmos essa fun√ß√£o no formato de um comando do AutoCAD, apenas com o nome da fun√ß√£o, devemos colocar o prefixo 
<code class="language-plaintext highlighter-rouge">c:</code> na hora de definir o nome.</p>

<script src="https://gist.github.com/Jciel/292d07f92b94baf61c5e16fccd7c9dfb.js"></script>

<p><br /></p>

<p>Desta forma criamos um ‚Äúcomando‚Äù novo e podemos executar apenas digitando o nome da fun√ß√£o.</p>

<div class="img-container">
    <img src="https://i.ibb.co/C9PJSvn/execu-o-Fun-o2.png" />  
</div>

<p><br /></p>

<p>Alguns exemplos de fun√ß√µes.</p>

<p>Fun√ß√£o que retorna o comprimento de um c√≠rculo de di√¢metro 25.<br />
<script src="https://gist.github.com/Jciel/1f536fb75ea5ec180ca2ef34225fcca9.js"></script></p>

<p><br /></p>

<p>Fun√ß√£o que retorna a √°rea de um tri√¢ngulo b=5, h=7.<br />
<script src="https://gist.github.com/Jciel/4a3ae02dac3bd71fa82e1caeb10b8b78.js"></script></p>

<p><br /></p>

<p>Fun√ß√£o que retorna a √°rea de um c√≠rculo de di√¢metro 20.<br />
<script src="https://gist.github.com/Jciel/f128d8d8608bdb250da4484d6bd28c23.js"></script></p>

<p><br /></p>

<h4 id="conclus√£o"><strong>Conclus√£o</strong></h4>

<p>Fica aqui uma introdu√ß√£o a AutoLISP que pode ser uma poderosa ferramenta para quem trabalha com AutoCAD possibilitando a 
cria√ß√£o de rotinas para automatiza√ß√£o de tarefas repetitivas bem como para cria√ß√£o de ferramentas que n√£o existem prontas 
para problemas espec√≠ficos da √°rea, inclusive muitos dos comando do AutoCAD s√£o rotinas AutoLISP, tamb√©m √© poss√≠vel a 
manipula√ß√£o de entidades em um desenho podendo assim capturar informa√ß√µes sobre as mesmas e/ou alterar essas informa√ß√µes, 
esses e outros assuntos tentarei abordar em outros textos.<br />
Comentem se gostaram, compartilhem se conhecem algu√©m a quem possa ser √∫til este texto e at√© o pr√≥ximo.</p>

<p><br />
<br /></p>

<div id="ref-post">
    <a href="/2019/AutoLISP-funcoes-matematicas-e-condicionais/">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/0e/Cartesian-coordinate-system.svg" />
        <div id="link-title">
            <strong>AutoLISP - Fun√ß√µes matem√°ticas, condicionais e controle de fluxo</strong>
        </div>
        <div id="link-description">
            Em AutoLisp, assim como na maioria das linguagens de programa√ß√£o, temos os operadores utilizados em c√°lculos 
            matem√°ticos que realizam as opera√ß√µes b√°sicas de soma (+)...
        </div>
    </a>
</div>

<p><br /></p>

<h5 id="refer√™ncias"><strong>Refer√™ncias:</strong></h5>
<ul>
  <li>GA√ÅL, Jos√© Alberto. Curso de AutoLISP. Campinas, SP: Desecad, 1997. 251 p.</li>
  <li>KRAMER, William. Programando em AUtoLISP. S√£o Paulo, SP: Makron Books, s/d, 274 p.</li>
  <li>AUTODESK. AutoCAD Developer Documentation. 2019. Dispon√≠vel em: <a href="https://help.autodesk.com/view/OARX/2019/PTB">https://help.autodesk.com/view/OARX/2019/PTB</a></li>
</ul>
:ET